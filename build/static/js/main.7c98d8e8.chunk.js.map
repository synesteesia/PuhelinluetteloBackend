{"version":3,"sources":["services/persons.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","put","delete","Persons","props","person","list","map","key","number","name","onClick","handleDelete","Input","text","value","onChange","FormAddPerson","onSubmit","newName","handleNameChange","newNumber","handleNumberChange","type","Message","message","className","App","useState","persons","setPersons","shownPersons","setShownPersons","setNewName","setNewNumber","newFilter","setNewFilter","successMessage","setSuccessMessage","failMessage","setFailMessage","useEffect","personService","then","response","data","event","target","length","filter","includes","preventDefault","personObject","window","confirm","updatedPerson","find","updatedPersons","setTimeout","catch","error","newPersons","deletePerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7c98d8e8.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nconst deleteObject = id => {\n    return axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default { \n  getAll: getAll, \n  create: create, \n  update: update, \n  delete: deleteObject\n}","\nimport ReactDOM from 'react-dom'\nimport React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport './index.css'\n\n\n\nconst Persons = (props) => {\nconst person = props.list.map(person => \n<div key={person.number}>{person.name} {person.number} \n  <button onClick={props.handleDelete(person.id)}>delete</button>\n</div>)\n  return (\n    <div>\n      {person}\n    </div>\n  )\n}\n\nconst Input = (props) => {\n  return (\n    <div>\n      <p>{props.text}</p>\n      <input \n        value={props.value}\n        onChange={props.onChange}\n      />\n    </div>\n  )\n}\n\nconst FormAddPerson = (props) => {\n  return (\n    <form onSubmit={props.onSubmit}>\n      <div>\n        <Input text='name:' value={props.newName} onChange={props.handleNameChange}/>\n      </div>\n      <div>\n        <Input text='number:' value={props.newNumber} onChange={props.handleNumberChange}/>\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Message = ({ message, className }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className={className}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const list = [\n    {\n      name: '',\n      number: ''\n    }\n  ]\n\n  const [ persons, setPersons] = useState(list)\n  const [ shownPersons, setShownPersons ] = useState(list)\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [successMessage, setSuccessMessage] = useState(null)\n  const [failMessage, setFailMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n        setShownPersons(response.data)\n      })\n  }, [])\n\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n\n    if (event.target.value.length === 0) setShownPersons([ ...persons ])\n    else setShownPersons([ ...persons.filter(person => person.name.includes(event.target.value)) ])\n  }\n\n\n  const handleDelete = (id) => () => {\n    const deletePerson = shownPersons.find(person => person.id === id)\n\n    personService\n    .delete(id)\n    .then(() => {\n      setSuccessMessage(`Deleted ${deletePerson.name}`)\n      setPersons([ ...persons.filter(person => person.id !== id) ])\n      setShownPersons([ ...persons.filter(person => person.id !== id)])\n      setTimeout(() => {\n        setSuccessMessage(null)\n      },5000)\n      setNewNumber('')\n      setNewName('')\n    })\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    }\n\n    if (!persons.map(person => person.name).includes(newName)) {\n\n      personService\n      .create(personObject)\n      .then(response => {\n        const newPersons = [ ...persons, response.data ]\n        setPersons(newPersons)\n        setSuccessMessage('Added '+newName)\n\n        if (newFilter.length === 0) setShownPersons(newPersons)\n        else setShownPersons([ ...newPersons.filter(person => person.name.includes(newFilter)) ])\n\n        setTimeout(() => {\n          setSuccessMessage(null)\n        },5000)\n        setNewNumber('')\n        setNewName('')\n      })\n\n\n    } else {\n      const replace = window.confirm('name is already added to phonebook, replace the number with new one?')\n      if (replace) {\n        const updatedPerson = {\n          ...persons.find(person => person.name === newName),\n          number: newNumber\n        }\n        const updatedPersons = [ ...persons.filter(person => person.id !== updatedPerson.id), updatedPerson ]\n\n        personService.update(\n          updatedPerson.id, updatedPerson\n        ).then(() => {\n          setPersons(updatedPersons)\n          setSuccessMessage('Changed number of '+newName)\n          setTimeout(() => {\n            setSuccessMessage(null)\n          },5000)\n          setNewNumber('')\n          setNewName('')\n        })\n        .catch(error => {\n          setFailMessage(`${newName} is already deleted`)\n          setTimeout(() => {\n            setFailMessage(null)\n          },5000)\n          setPersons([ ...persons.filter(person => person.id !== updatedPerson.id) ])\n          setShownPersons([ ...persons.filter(person => person.id !== updatedPerson.id)])\n          setNewNumber('')\n          setNewName('')\n\n        })\n\n        if (newFilter.length === 0) setShownPersons(updatedPersons)\n        else setShownPersons([ ...updatedPersons.filter(person => person.name.includes(newFilter)) ])\n\n        }\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={successMessage} className='success' />\n      <Message message={failMessage} className='fail' />\n\n      <div>\n        <Input text='find name' value={newFilter} onChange={handleFilterChange}/>\n      </div>\n      <h3>Add new</h3>\n        <FormAddPerson onSubmit={addPerson} \n          newName={newName} \n          handleNameChange={handleNameChange} \n          newNumber={newNumber} \n          handleNumberChange={handleNumberChange}/>\n      <h3>Numbers</h3>\n      <Persons list={shownPersons} handleDelete={handleDelete}/>\n    </div>\n  )\n\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}