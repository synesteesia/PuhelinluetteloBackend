(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(7),u=n(2),c=n(3),l=n(17),r=n.n(l),i=n(0),o=n.n(i),m=n(5),f=n.n(m),d="/api/persons",s=function(){return f.a.get(d)},b=function(e){return f.a.post(d,e)},h=function(e,t){return f.a.put("".concat(d,"/").concat(e),t)},v=function(e){return f.a.delete("".concat(d,"/").concat(e))},j=(n(40),function(e){var t=e.list.map((function(t){return o.a.createElement("div",{key:t.number},t.name," ",t.number,o.a.createElement("button",{onClick:e.handleDelete(t.id)},"delete"))}));return o.a.createElement("div",null,t)}),E=function(e){return o.a.createElement("div",null,o.a.createElement("p",null,e.text),o.a.createElement("input",{value:e.value,onChange:e.onChange}))},O=function(e){return o.a.createElement("form",{onSubmit:e.onSubmit},o.a.createElement("div",null,o.a.createElement(E,{text:"name:",value:e.newName,onChange:e.handleNameChange})),o.a.createElement("div",null,o.a.createElement(E,{text:"number:",value:e.newNumber,onChange:e.handleNumberChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},g=function(e){var t=e.message,n=e.className;return null===t?null:o.a.createElement("div",{className:n},t)},p=function(){var e=[{name:"",number:""}],t=Object(i.useState)(e),n=Object(c.a)(t,2),l=n[0],r=n[1],m=Object(i.useState)(e),f=Object(c.a)(m,2),d=f[0],p=f[1],N=Object(i.useState)(""),w=Object(c.a)(N,2),C=w[0],S=w[1],k=Object(i.useState)(""),x=Object(c.a)(k,2),y=x[0],D=x[1],T=Object(i.useState)(""),A=Object(c.a)(T,2),J=A[0],B=A[1],I=Object(i.useState)(null),P=Object(c.a)(I,2),q=P[0],z=P[1],F=Object(i.useState)(null),G=Object(c.a)(F,2),H=G[0],K=G[1];Object(i.useEffect)((function(){s().then((function(e){r(e.data),p(e.data)}))}),[]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(g,{message:q,className:"success"}),o.a.createElement(g,{message:H,className:"fail"}),o.a.createElement("div",null,o.a.createElement(E,{text:"find name",value:J,onChange:function(e){B(e.target.value),0===e.target.value.length?p(Object(u.a)(l)):p(Object(u.a)(l.filter((function(t){return t.name.includes(e.target.value)}))))}})),o.a.createElement("h3",null,"Add new"),o.a.createElement(O,{onSubmit:function(e){e.preventDefault();var t={name:C,number:y};if(l.map((function(e){return e.name})).includes(C)){if(window.confirm("name is already added to phonebook, replace the number with new one?")){var n=Object(a.a)(Object(a.a)({},l.find((function(e){return e.name===C}))),{},{number:y}),c=[].concat(Object(u.a)(l.filter((function(e){return e.id!==n.id}))),[n]);h(n.id,n).then((function(){r(c),z("Changed number of "+C),setTimeout((function(){z(null)}),5e3),D(""),S("")})).catch((function(e){K("".concat(C," is already deleted")),setTimeout((function(){K(null)}),5e3),r(Object(u.a)(l.filter((function(e){return e.id!==n.id})))),p(Object(u.a)(l.filter((function(e){return e.id!==n.id})))),D(""),S("")})),0===J.length?p(c):p(Object(u.a)(c.filter((function(e){return e.name.includes(J)}))))}}else b(t).then((function(e){var t=[].concat(Object(u.a)(l),[e.data]);r(t),z("Added "+C),0===J.length?p(t):p(Object(u.a)(t.filter((function(e){return e.name.includes(J)})))),setTimeout((function(){z(null)}),5e3),D(""),S("")}))},newName:C,handleNameChange:function(e){S(e.target.value)},newNumber:y,handleNumberChange:function(e){D(e.target.value)}}),o.a.createElement("h3",null,"Numbers"),o.a.createElement(j,{list:d,handleDelete:function(e){return function(){var t=d.find((function(t){return t.id===e}));v(e).then((function(){z("Deleted ".concat(t.name)),r(Object(u.a)(l.filter((function(t){return t.id!==e})))),p(Object(u.a)(l.filter((function(t){return t.id!==e})))),setTimeout((function(){z(null)}),5e3),D(""),S("")}))}}}))};r.a.render(o.a.createElement(p,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.7c98d8e8.chunk.js.map